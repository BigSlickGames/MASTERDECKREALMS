.deck-selector{
  --suit-color: #ff2a2a;
  --deck-card-w: min(440px, 92vw, calc(66vh / 1.4));
  --deck-card-h: calc(var(--deck-card-w) * 1.4);
  --deck-stage-w: calc(var(--deck-card-w) * 1.2);
  --deck-stage-h: calc(var(--deck-card-h) * 1.08);
  --deck-stack-w: calc(var(--deck-card-w) * 1.03);
  --deck-stack-h: calc(var(--deck-card-h) * 1.05);
  --deck-arrow: calc(var(--deck-card-w) * 0.2);
  --deck-rank: calc(var(--deck-card-w) * 0.15);
  display:grid;
  gap:16px;
  justify-items:center;
  position:relative;
}
.deck-stage{
  position:relative;
  width: min(100%, var(--deck-stage-w));
  height: min(70vh, var(--deck-stage-h));
  display:grid;
  place-items:center;
}
.deck-stack{
  position:absolute;
  width: var(--deck-stack-w);
  height: var(--deck-stack-h);
  display:block;
  transform: translate(12px, 18px) rotate(-2deg);
  pointer-events:none;
}
.deck-slab{
  position:absolute;
  inset:0;
  border-radius:20px;
  border:1px solid rgba(255,255,255,.18);
  background:
    linear-gradient(145deg, rgba(255,255,255,.35), rgba(0,0,0,.6)),
    linear-gradient(160deg,
      color-mix(in srgb, var(--suit-color) 30%, #cfd7e3),
      #202834 70%,
      color-mix(in srgb, var(--suit-color) 35%, #0b111a));
  box-shadow:
    inset 0 0 26px rgba(255,255,255,.08),
    0 18px 30px rgba(0,0,0,.35);
}
.deck-slab:nth-child(1){transform: translate(-8px, -8px) rotate(-2deg);}
.deck-slab:nth-child(2){transform: translate(-2px, -2px) rotate(-1deg);}
.deck-slab:nth-child(3){transform: translate(6px, 6px) rotate(0.5deg);}

.deck-card{
  position:relative;
  width: var(--deck-card-w);
  height: var(--deck-card-h);
  border-radius:22px;
  border:1px solid rgba(255,255,255,.24);
  background:
    linear-gradient(135deg, rgba(255,255,255,.22), rgba(0,0,0,.55)),
    linear-gradient(165deg,
      color-mix(in srgb, var(--suit-color) 32%, #e2e7f0),
      #222a36 60%,
      color-mix(in srgb, var(--suit-color) 40%, #0b1118));
  box-shadow:
    inset 0 0 24px rgba(255,255,255,.1),
    0 18px 38px rgba(0,0,0,.45),
    0 0 28px color-mix(in srgb, var(--suit-color) 45%, transparent);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:10px;
  padding:22px 16px 18px;
  text-align:center;
  color:var(--txt);
  transform-style:preserve-3d;
  transition: transform .2s ease;
}
.deck-card::before{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background:
    repeating-linear-gradient(130deg, rgba(255,255,255,.08) 0 2px, transparent 2px 6px),
    radial-gradient(160px 120px at 30% 20%, rgba(255,255,255,.2), transparent 65%);
  opacity:.65;
  pointer-events:none;
}
.deck-card-header{
  display:flex;
  align-items:center;
  gap:10px;
  font-family: var(--font-display);
}
.deck-card-rank{
  font-size: var(--deck-rank);
  letter-spacing:2px;
  text-shadow: 0 0 16px color-mix(in srgb, var(--suit-color) 70%, transparent);
}
.deck-card-suit{
  font-size:24px;
  color: color-mix(in srgb, var(--suit-color) 75%, #fff);
  text-shadow: 0 0 16px color-mix(in srgb, var(--suit-color) 70%, transparent);
}
.deck-card-title{
  font-size:12px;
  letter-spacing:1.6px;
  text-transform: uppercase;
  color: color-mix(in srgb, var(--suit-color) 60%, #fff);
}
.deck-card-owned{
  display:none;
  padding:4px 10px;
  border-radius:999px;
  border:1px dashed color-mix(in srgb, var(--suit-color) 70%, #fff);
  color: color-mix(in srgb, var(--suit-color) 75%, #fff);
  background: color-mix(in srgb, var(--suit-color) 18%, transparent);
  font-size:10px;
  letter-spacing:1.2px;
  text-transform: uppercase;
}
.deck-card-stats{
  margin-top:auto;
  width:100%;
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:6px;
}
.deck-card-stat{
  border:1px solid rgba(255,255,255,.16);
  border-radius:12px;
  padding:6px 8px;
  background: rgba(0,0,0,.28);
  font-size:10px;
  text-transform: uppercase;
  letter-spacing:1px;
}
.deck-overlay{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:3;
}
.deck-arrow{
  position:absolute;
  width: var(--deck-arrow);
  height: var(--deck-arrow);
  border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  background:
    linear-gradient(145deg, rgba(255,255,255,.18), rgba(0,0,0,.5)),
    linear-gradient(160deg, rgba(10,16,24,.9), rgba(4,6,10,.8));
  box-shadow:
    inset 0 0 12px rgba(255,255,255,.08),
    0 10px 18px rgba(0,0,0,.35);
  display:grid;
  place-items:center;
  pointer-events:auto;
  cursor:pointer;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}
.deck-arrow svg{
  width:18px;
  height:18px;
  fill: color-mix(in srgb, var(--suit-color) 70%, #fff);
  filter: drop-shadow(0 0 8px color-mix(in srgb, var(--suit-color) 60%, transparent));
}
.deck-arrow.up{top:8px; left:50%; transform: translateX(-50%);}
.deck-arrow.right{right:8px; top:50%; transform: translateY(-50%) rotate(90deg);}
.deck-arrow.down{bottom:8px; left:50%; transform: translateX(-50%) rotate(180deg);}
.deck-arrow.left{left:8px; top:50%; transform: translateY(-50%) rotate(-90deg);}
.deck-arrow:hover{
  border-color: color-mix(in srgb, var(--suit-color) 60%, #fff);
  box-shadow:
    0 0 16px color-mix(in srgb, var(--suit-color) 35%, transparent),
    0 12px 20px rgba(0,0,0,.4);
}
.deck-arrow.active{
  border-color: color-mix(in srgb, var(--suit-color) 80%, #fff);
  box-shadow:
    0 0 18px color-mix(in srgb, var(--suit-color) 45%, transparent),
    0 16px 22px rgba(0,0,0,.45);
}
.deck-center-label{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%, -50%);
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.35);
  color: color-mix(in srgb, var(--suit-color) 70%, #fff);
  font-size:10px;
  letter-spacing:1.2px;
  text-transform: uppercase;
  pointer-events:none;
}
.deck-actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
}

.deck-card.flick-up{animation: flickUp .28s ease;}
.deck-card.flick-right{animation: flickRight .28s ease;}
.deck-card.flick-down{animation: flickDown .28s ease;}
.deck-card.flick-left{animation: flickLeft .28s ease;}

@keyframes flickUp{
  0%{transform: translateY(0) rotateX(0deg);}
  40%{transform: translateY(-10px) rotateX(6deg);}
  100%{transform: translateY(0) rotateX(0deg);}
}
@keyframes flickRight{
  0%{transform: translateX(0) rotateY(0deg);}
  40%{transform: translateX(10px) rotateY(-6deg);}
  100%{transform: translateX(0) rotateY(0deg);}
}
@keyframes flickDown{
  0%{transform: translateY(0) rotateX(0deg);}
  40%{transform: translateY(10px) rotateX(-6deg);}
  100%{transform: translateY(0) rotateX(0deg);}
}
@keyframes flickLeft{
  0%{transform: translateX(0) rotateY(0deg);}
  40%{transform: translateX(-10px) rotateY(6deg);}
  100%{transform: translateX(0) rotateY(0deg);}
}

@media (max-width: 420px){
  .deck-selector{
    --deck-card-w: min(400px, 94vw, calc(64vh / 1.4));
  }
}
