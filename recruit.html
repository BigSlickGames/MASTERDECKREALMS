<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Card Forge - Hunt</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="./hunt.css" />
</head>
<body class="hunt-full">
  <div class="app">
    <header class="topbar glass">
      <div class="brand">
        <div class="brand-mark">CF</div>
        <div>
          <div class="brand-title">HUNT</div>
          <div class="hud-typing">SYSTEM LINK: ACTIVE</div>
        </div>
      </div>

      <section class="panel upgrades-panel glass top-menu-panel">
        <div class="hud-corners"></div>
        <div class="neon-rail"></div>
        <div class="steel-grill"></div>
        <div class="panel-title">
          <span class="panel-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M3 5h8v6H3V5zm10 0h8v6h-8V5zM3 13h8v6H3v-6zm10 0h8v6h-8v-6z"/></svg>
          </span>
          <span class="panel-label">Screens</span>
        </div>
        <div class="screen-links">
          <a class="screen-link" href="./index.html">CMS</a>
          <a class="screen-link active" href="./recruit.html">HUNT</a>
          <a class="screen-link" href="./store.html">Card Store</a>
          <a class="screen-link" href="./battle.html">Battle</a>
          <a class="screen-link" href="./explore.html">Explore</a>
        </div>
      </section>

      <div class="top-suit">
        <button id="suitButton" class="suit-dial" aria-label="Suit selection button">
          <span class="dial-shell"></span>
          <span class="dial-ring"></span>
          <span class="dial-glass"></span>
          <span class="dial-sheen"></span>
          <span class="dial-sparks"></span>
          <span class="dial-icon" id="suitIcon">&#x2663;</span>
        </button>
      </div>

      <div class="top-actions">
        <div class="chips">
          <div class="chips-label">Chips</div>
          <div class="chips-value" id="chipsValue">1200</div>
          <button class="btn tiny" id="btnAddChips">Add</button>
        </div>
        <div class="profile">
          <div class="avatar">P1</div>
          <div>
            <div class="profile-name">Player One</div>
            <div class="profile-level">Collector Lv 6</div>
          </div>
        </div>
      </div>
    </header>

    <main class="main single hunt-screen">
      <section class="panel hunt-game-panel glass">
        <div class="hud-corners"></div>
        <div class="neon-rail"></div>
        <div class="steel-grill"></div>
        <div class="panel-title">
          <span class="panel-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7 3h10v2H7V3zm-2 4h14v12H5V7zm2 2v8h10V9H7z"/></svg>
          </span>
          <span class="panel-label">Council Hunt Arena</span>
        </div>
        <iframe id="huntGameIframe" class="hunt-game-iframe" title="Council Hunt" src="./deck-realms-council-hunt/deck-realms-council-hunt/index.html" loading="eager"></iframe>
      </section>
      <section class="panel rotate-panel glass hunt-rotate-panel">
        <div class="hud-corners"></div>
        <div class="neon-rail"></div>
        <div class="steel-grill"></div>
        <div class="panel-title">
          <span class="panel-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7 2h10a2 2 0 0 1 2 2v6h-2V4H7v16h8v2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm10.5 9.5V8l4 4-4 4v-3.5h-3v-2h3z"/></svg>
          </span>
          <span class="panel-label">Rotate Device</span>
        </div>
        <div class="rotate-callout">
          <div class="rotate-arrow" aria-hidden="true"></div>
          <div class="rotate-text">Rotate your device for the full HUNT experience.</div>
        </div>
      </section>
    </main>

    <nav class="mobile-nav" aria-label="Primary">
      <a href="./index.html">CMS</a>
      <a class="active" href="./recruit.html">HUNT</a>
      <a href="./store.html">Store</a>
      <a href="./battle.html">Battle</a>
      <a href="./explore.html">Explore</a>
    </nav>
  </div>

  <script src="./app.js"></script>
  <script>
    (() => {
      const panel = document.querySelector(".hunt-game-panel");
      const iframe = document.getElementById("huntGameIframe");
      if (!panel || !iframe) return;

      function fitLandscapeGame() {
        const panelStyle = getComputedStyle(panel);
        const paddingLeft = parseFloat(panelStyle.paddingLeft);
        const paddingRight = parseFloat(panelStyle.paddingRight);
        const paddingTop = parseFloat(panelStyle.paddingTop);
        const paddingBottom = parseFloat(panelStyle.paddingBottom);
        const title = panel.querySelector(".panel-title");
        const titleStyle = title ? getComputedStyle(title) : null;
        const titleHeight = title ? title.offsetHeight : 0;
        const titleMargin = titleStyle ? parseFloat(titleStyle.marginBottom) : 0;
        const availableWidth = panel.clientWidth - paddingLeft - paddingRight;
        const availableHeight = panel.clientHeight - paddingTop - paddingBottom - titleHeight - titleMargin;
        if (availableWidth <= 0 || availableHeight <= 0) return;

        const doc = iframe.contentDocument;
        const app = doc?.getElementById("app") || doc?.body;
        const nativeWidth = Math.max(app?.scrollWidth || 0, 1);
        const nativeHeight = Math.max(app?.scrollHeight || 0, 1);
        const scale = Math.min(availableWidth / nativeHeight, availableHeight / nativeWidth, 1);

        iframe.style.width = `${nativeWidth}px`;
        iframe.style.height = `${nativeHeight}px`;
        iframe.style.left = `${paddingLeft + availableWidth / 2}px`;
        iframe.style.top = `${paddingTop + titleHeight + titleMargin + availableHeight / 2}px`;
        iframe.style.transform = `translate(-50%, -50%) rotate(90deg) scale(${scale})`;
      }

      window.addEventListener("resize", fitLandscapeGame);
      window.addEventListener("orientationchange", fitLandscapeGame);
      iframe.addEventListener("load", fitLandscapeGame);
      fitLandscapeGame();
    })();
  </script>
</body>
</html>
